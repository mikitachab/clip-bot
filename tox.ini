[tox]
envlist = test,pylint,black,flake8
skipsdist = True


[testenv:test]
setenv =
    BOT_TOKEN = 123:test

whitelist_externals = poetry
commands =
    poetry install -vv
    poetry run pytest -vvv tests {posargs}

[testenv:black]
deps =
    black
	
commands =
    black -l 120 --check --diff bot tests

[testenv:flake8]
deps =
    flake8
	
commands =
    flake8 --max-line-length 120 bot tests

[testenv:vulture]
deps =
    vulture

commands =
    vulture bot tests --min-confidence 100

[testenv:pylint]
setenv =
    BOT_TOKEN = 123:test
    PYTHONPATH = {toxinidir}/bot:{envdir}
    PATH = {toxinidir}/bot:{env:PATH}

deps =
    -r{toxinidir}/requirements.txt
    pylint
    pylint-pytest

commands =
    pylint bot tests
